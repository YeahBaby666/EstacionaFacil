<html xmlns:th="http://www.thymeleaf.org" th:replace="~{_layout :: layout(~{::main}, 'Ticket de Pago')}">

<main class="container mx-auto p-4 flex justify-center">
    <div class="bg-white p-8 rounded-lg shadow-xl w-full max-w-lg">
        <h2 class="text-2xl font-bold text-center text-indigo-600 mb-6">Gracias por su visita</h2>
        
        <div class="border-b pb-4 mb-4">
            <h3 class="text-lg font-semibold">Resumen del Ticket</h3>
            <p><strong>Cliente: </strong><span th:text="${reserva.usuario.nombre}"></span></p>
            <p><strong>Veh√≠culo: </strong><span th:text="${reserva.vehiculo.placa}"></span></p>
            <p><strong>Espacio: </strong><span th:text="${reserva.espacio.ubicacion}"></span></p>
            <p><strong>Hora de Entrada: </strong><span th:text="${#temporals.format(reserva.horaInicio, 'dd/MM/yyyy HH:mm')}"></span></p>
            <p><strong>Hora de Salida: </strong><span th:text="${#temporals.format(reserva.horaFin, 'dd/MM/yyyy HH:mm')}"></span></p>
        </div>

        <div>
            <h3 class="text-lg font-semibold">Desglose de Pago</h3>
            <div class="space-y-2 mt-2">
                <!-- Iterar sobre el desglose de costos -->
                <div th:each="item : ${desglose}" th:unless="${item.key == 'TOTAL' || item.key == 'Horas'}" class="flex justify-between">
                    <span th:text="${item.key}">Costo Base Reserva</span>
                    <span th:text="|S/ ${#numbers.formatDecimal(item.value, 1, 2)}|">S/ 5.00</span>
                </div>
                
                <div class="flex justify-between font-bold">
                    <span th:text="|Total Horas (${desglose.get('Horas')}h)|">Total Horas (2h)</span>
                    <span th:text="|S/ ${#numbers.formatDecimal(desglose.get('Costo Estadia'), 1, 2)}|">S/ 10.00</span>
                </div>
                
                <div class="flex justify-between text-xl font-bold text-indigo-600 pt-2 border-t">
                    <span>TOTAL A PAGAR</span>
                    <span th:text="|S/ ${#numbers.formatDecimal(reserva.costoTotal, 1, 2)}|">S/ 15.00</span>
                </div>
            </div>
        </div>
        
        <div class="text-center mt-6">
            <a th:href="@{/}" class="text-indigo-600 hover:underline">Volver al inicio</a>
        </div>
    </div>
</main>
</html>